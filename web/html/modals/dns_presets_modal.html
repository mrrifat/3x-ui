{{define "modals/dnsPresetsModal"}}
<a-modal id="dnsPresets-modal" v-model="dnsPresetsModal.visible" :title="dnsPresetsModal.title" :closable="true"
  :mask-closable="false" :footer="null" :class="themeSwitcher.currentTheme">
  <a-list class="ant-dns-presets-list" bordered :style="{ width: '100%' }">
    <a-list-item v-for="dns in dnsPresetsDatabase" :style="{ padding: '12px 16px' }">
      <div class="ant-dns-presets-card">
        <div class="ant-dns-presets-header">
          <a-space direction="horizontal" size="small" align="center">
            <a-tag :color="dns.type.includes('Split') ? 'blue' : (dns.family ? 'purple' : 'green')">
              [[ dns.type ]]
            </a-tag>
            <span class="ant-dns-presets-list-name">[[ dns.name ]]</span>
          </a-space>
          <a-button class="ant-dns-presets-install" type="primary" @click="dnsPresetsModal.install(dns.data)">{{ i18n "install" }}</a-button>
        </div>
        <div class="ant-dns-presets-description" v-if="dns.description">
          [[ dns.description ]]
        </div>
      </div>
    </a-list-item>
  </a-list>
</a-modal>

<style>
  .ant-dns-presets-card {
    width: 100%;
  }

  .ant-dns-presets-header {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
    margin-bottom: 8px;
  }

  .ant-dns-presets-install {
    margin-left: auto;
  }

  .ant-dns-presets-description {
    font-size: 12px;
    color: #666;
    margin-top: 4px;
    line-height: 1.5;
  }

  .dark .ant-dns-presets-list {
    border-color: var(--dark-color-stroke)
  }

  .dark .ant-dns-presets-list-name {
    color: var(--dark-color-text-primary);
  }

  .dark .ant-dns-presets-description {
    color: #999;
  }
</style>

<script>
  const dnsPresetsDatabase = [
    {
      name: 'Hybrid China (Default)',
      family: false,
      type: 'Split DNS (Traditional CN + DoH International)',
      description: 'Chinese domains â†’ AliDNS (223.5.5.5) ~10ms âš¡ | International domains â†’ DoH (Cloudflare/AliDNS)',
      data: [
        { address: "223.5.5.5", domains: ["geosite:cn"], expectIPs: ["geoip:cn"] },
        { address: "119.29.29.29", domains: ["geosite:cn"], expectIPs: ["geoip:cn"] },
        { address: "https://223.5.5.5/dns-query", domains: ["geosite:geolocation-!cn"] },
        { address: "https://1.1.1.1/dns-query" },
        { address: "tls://1.1.1.1" },
        { address: "1.1.1.1" },
        { address: "8.8.8.8" }
      ]
    },
    {
      name: 'ControlD Custom (Smart Split)',
      family: false,
      type: 'Split DNS (Traditional CN + Custom DoH)',
      description: 'Chinese domains â†’ AliDNS ~10ms âš¡ | International domains â†’ ControlD DoH (https://dns.controld.com/20m7ehw60mm) ~50ms ðŸ”’',
      data: [
        { address: "223.5.5.5", domains: ["geosite:cn"], expectIPs: ["geoip:cn"] },
        { address: "119.29.29.29", domains: ["geosite:cn"], expectIPs: ["geoip:cn"] },
        { address: "https://dns.controld.com/20m7ehw60mm", domains: ["geosite:geolocation-!cn"] },
        { address: "20m7ehw60mm.dns.controld.com" },
        { address: "https://1.1.1.1/dns-query" },
        { address: "1.1.1.1" }
      ]
    },
    {
      name: 'AliDNS DoH (China Optimized)',
      family: false,
      type: 'Split DNS (Traditional CN + AliDNS DoH)',
      description: 'Chinese domains â†’ AliDNS ~10ms âš¡ | International domains â†’ AliDNS DoH (https://223.5.5.5/dns-query)',
      data: [
        { address: "223.5.5.5", domains: ["geosite:cn"], expectIPs: ["geoip:cn"] },
        { address: "119.29.29.29", domains: ["geosite:cn"], expectIPs: ["geoip:cn"] },
        { address: "https://223.5.5.5/dns-query", domains: ["geosite:geolocation-!cn"] },
        { address: "https://223.6.6.6/dns-query" },
        { address: "1.1.1.1" }
      ]
    },
    {
      name: 'Cloudflare DoH (Split DNS)',
      family: false,
      type: 'Split DNS (Traditional CN + Cloudflare DoH)',
      description: 'Chinese domains â†’ AliDNS ~10ms âš¡ | International domains â†’ Cloudflare DoH (https://1.1.1.1/dns-query) ~50ms ðŸ”’',
      data: [
        { address: "223.5.5.5", domains: ["geosite:cn"], expectIPs: ["geoip:cn"] },
        { address: "119.29.29.29", domains: ["geosite:cn"], expectIPs: ["geoip:cn"] },
        { address: "https://1.1.1.1/dns-query", domains: ["geosite:geolocation-!cn"] },
        { address: "https://1.0.0.1/dns-query" },
        { address: "1.1.1.1" }
      ]
    },
    {
      name: 'Google DoH (Split DNS)',
      family: false,
      type: 'Split DNS (Traditional CN + Google DoH)',
      description: 'Chinese domains â†’ AliDNS ~10ms âš¡ | International domains â†’ Google DoH (https://8.8.8.8/dns-query) ~50ms ðŸ”’',
      data: [
        { address: "223.5.5.5", domains: ["geosite:cn"], expectIPs: ["geoip:cn"] },
        { address: "119.29.29.29", domains: ["geosite:cn"], expectIPs: ["geoip:cn"] },
        { address: "https://8.8.8.8/dns-query", domains: ["geosite:geolocation-!cn"] },
        { address: "https://8.8.4.4/dns-query" },
        { address: "8.8.8.8" }
      ]
    },
    {
      name: 'Cloudflare DoT (Split DNS)',
      family: false,
      type: 'Split DNS (Traditional CN + Cloudflare DoT)',
      description: 'Chinese domains â†’ AliDNS ~10ms âš¡ | International domains â†’ Cloudflare DoT (tls://1.1.1.1) ~50ms ðŸ”’',
      data: [
        { address: "223.5.5.5", domains: ["geosite:cn"], expectIPs: ["geoip:cn"] },
        { address: "119.29.29.29", domains: ["geosite:cn"], expectIPs: ["geoip:cn"] },
        { address: "tls://1.1.1.1", domains: ["geosite:geolocation-!cn"] },
        { address: "tls://1.0.0.1" },
        { address: "1.1.1.1" }
      ]
    },
    {
      name: 'Google DoT (Split DNS)',
      family: false,
      type: 'Split DNS (Traditional CN + Google DoT)',
      description: 'Chinese domains â†’ AliDNS ~10ms âš¡ | International domains â†’ Google DoT (tls://8.8.8.8) ~50ms ðŸ”’',
      data: [
        { address: "223.5.5.5", domains: ["geosite:cn"], expectIPs: ["geoip:cn"] },
        { address: "119.29.29.29", domains: ["geosite:cn"], expectIPs: ["geoip:cn"] },
        { address: "tls://8.8.8.8", domains: ["geosite:geolocation-!cn"] },
        { address: "tls://8.8.4.4" },
        { address: "8.8.8.8" }
      ]
    },
    {
      name: 'Traditional China DNS',
      family: false,
      type: 'Traditional DNS (No Split)',
      description: 'All domains â†’ Traditional DNS (223.5.5.5, 119.29.29.29, 1.1.1.1, 8.8.8.8) - No encryption, fastest possible',
      data: [
        { address: "223.5.5.5" },
        { address: "119.29.29.29" },
        { address: "1.1.1.1" },
        { address: "8.8.8.8" }
      ]
    }
  ]

  const dnsPresetsModal = {
    title: '',
    visible: false,
    selected: null,
    install(selectedPreset) {
      return ObjectUtil.execute(dnsPresetsModal.selected, selectedPreset);
    },
    show({ title = '', selected = (selectedPreset) => { }, isEdit = false }) {
      this.title = title;
      this.selected = selected;
      this.visible = true;
    },
    close() {
      dnsPresetsModal.visible = false;
    },
  };

  new Vue({
    delimiters: ['[[', ']]'],
    el: '#dnsPresets-modal',
    data: {
      dnsPresetsModal: dnsPresetsModal,
    }
  });
</script>
{{end}}